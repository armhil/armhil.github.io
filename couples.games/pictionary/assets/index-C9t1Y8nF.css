:root{--bg: #f3f6ff;--bg-accent: #e9f2ff;--ink: #10213d;--ink-soft: #4a5b78;--panel: #ffffff;--line: #c9d7ee;--line-strong: #8da5cf;--primary: #1d4ed8;--primary-strong: #1e3a8a;--accent: #ea580c;--danger: #7c3aed;font-family:Manrope,Avenir Next,sans-serif;color:var(--ink);background:var(--bg)}*{box-sizing:border-box}body{margin:0;min-height:100dvh;overflow:hidden;background:radial-gradient(circle at 8% 10%,rgba(29,78,216,.14),transparent 30%),radial-gradient(circle at 92% 16%,rgba(234,88,12,.12),transparent 34%),linear-gradient(160deg,var(--bg) 0%,var(--bg-accent) 100%)}#app{height:100dvh;min-height:100dvh;display:grid;place-items:center;padding:.5rem;overflow:hidden}.panel{background:var(--panel);border:1px solid var(--line);border-radius:20px;box-shadow:0 14px 30px #1e3a8a1a}.mode-gate{width:min(680px,calc(100vw - 2rem));margin:0;padding:1.5rem;display:grid;gap:1rem}.eyebrow{margin:0;text-transform:uppercase;letter-spacing:.1em;font-size:.74rem;font-weight:800;color:var(--primary)}h1{margin:0;font-size:1.9rem;line-height:1.08}.subtitle{margin:0;color:var(--ink-soft);font-size:.96rem}.mode-options{display:grid;gap:.8rem;grid-template-columns:repeat(2,minmax(0,1fr))}.mode-card{border:1px solid var(--line);border-radius:14px;padding:1rem;background:linear-gradient(180deg,#fff,#f7faff);display:grid;gap:.6rem}.mode-card h2{margin:0;font-size:1.03rem}.mode-card p{margin:0;color:var(--ink-soft);font-size:.9rem;min-height:2.8em}.mode-card button{width:100%}.mode-help{margin:0;text-align:center;color:var(--ink-soft);font-size:.85rem}.layout{width:min(1720px,100vw - 2rem);margin:0;display:grid;gap:.9rem;grid-template-columns:minmax(250px,290px) minmax(760px,1fr) minmax(300px,340px);align-items:start}.layout-focus-play{width:min(1780px,100vw - 1rem);height:calc(100dvh - 1rem);grid-template-columns:1fr}.layout-focus-play .controls-column{display:none}.layout-focus-play .controls{background:linear-gradient(180deg,#f7faff,#eef4ff)}.layout-focus-play .game-panel{padding:.65rem;background:radial-gradient(circle at 20% 18%,rgba(118,166,238,.22),transparent 36%),radial-gradient(circle at 86% 74%,rgba(29,78,216,.2),transparent 32%),linear-gradient(155deg,#1f4f87,#336fab 45%,#2b5f95);border-color:#2f5d93;height:100%;min-height:0;overflow:hidden}.controls-column{display:grid;gap:.8rem;align-content:start;min-height:0}.controls{padding:1.1rem;display:grid;gap:.9rem;align-content:start}.section-title{margin:0;font-size:1.5rem;line-height:1.08;font-weight:800}.mode-label{margin:0;color:var(--primary);font-weight:700;font-size:.9rem}.field{display:grid;gap:.35rem}.field span{font-size:.77rem;font-weight:800;color:var(--ink-soft);text-transform:uppercase;letter-spacing:.08em}.field-row{display:grid;gap:.65rem;grid-template-columns:1fr 1fr}input,select,button{font:inherit}input,select{width:100%;border:1px solid var(--line-strong);border-radius:12px;padding:.65rem .76rem;font-size:.95rem;background:#fff;color:var(--ink)}input:focus,select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #1d4ed829}.actions{display:grid;gap:.5rem}.actions.three-actions{grid-template-columns:repeat(3,minmax(0,1fr))}.actions.two-actions{grid-template-columns:repeat(2,minmax(0,1fr))}button{border:1px solid #9db2d3;border-radius:12px;background:#f5f8ff;color:var(--ink);font-size:.88rem;font-weight:700;padding:.62rem .8rem;cursor:pointer;transition:transform .12s ease,box-shadow .12s ease}button:hover:enabled{transform:translateY(-1px);box-shadow:0 8px 16px #1d4ed829}button:disabled{opacity:.45;cursor:not-allowed;box-shadow:none}button.primary{border-color:transparent;background:linear-gradient(140deg,var(--primary),var(--primary-strong));color:#fff}button.danger{border-color:transparent;background:linear-gradient(140deg,var(--danger),#5b21b6);color:#fff}.room-meta{display:grid;gap:.3rem;padding:.72rem;border-radius:14px;background:linear-gradient(150deg,#f8faff,#eef3ff);border:1px solid var(--line)}.room-meta p{margin:0;font-size:.9rem}.copy-link-button{background:linear-gradient(130deg,#f8f9ff,#f0f5ff)}.status{margin:0;font-weight:700;font-size:.82rem;line-height:1.25;color:var(--primary)}.status[data-type=warn]{color:var(--accent)}.status[data-type=error]{color:var(--danger)}.compact-controls{padding:.78rem;gap:.58rem}.compact-controls .subtitle{display:none}.compact-controls .section-title{font-size:1.22rem}.game-panel{padding:1.1rem;display:grid;gap:.8rem;align-content:start}.layout-focus-play .game-panel{grid-template-rows:auto minmax(0,1fr);align-content:stretch}.round-header{border:1px solid var(--line);border-radius:14px;background:linear-gradient(160deg,#fff,#f8fbff);padding:.58rem .68rem;display:grid;gap:.22rem}.game-hud{border:1px solid rgba(194,222,255,.44);border-radius:16px;background:linear-gradient(180deg,#133c6bf2,#1b477beb);color:#f7fbff;padding:.4rem .8rem;display:grid;grid-template-columns:190px 1fr auto;align-items:center;gap:.8rem}.hud-left{display:grid;gap:.3rem}.hud-timer{margin:0;font-size:1.6rem;line-height:1;font-weight:800}.hud-progress-track{height:14px;border-radius:999px;background:#0b274ae6;border:1px solid rgba(123,175,241,.45);overflow:hidden}.hud-progress-fill{display:block;height:100%;border-radius:inherit;background:linear-gradient(90deg,#ff9f1a,#f7c758)}.hud-center,.hud-right{margin:0;font-size:1.2rem;font-weight:800;text-align:center}.hud-right{display:flex;align-items:center;justify-content:flex-end;gap:.55rem;font-size:1.05rem}.hud-settings-button{min-width:44px;min-height:44px;padding:.2rem;border-radius:12px;border:1px solid rgba(155,196,246,.62);background:linear-gradient(180deg,#f8fcfff5,#dbecffe6);color:#1d4e88;font-size:1.34rem}.hud-copy-button{min-height:36px;padding:.35rem .72rem;border-radius:10px;border:1px solid rgba(155,196,246,.62);background:linear-gradient(180deg,#f8fcfff5,#dbecffe6);color:#1d4e88;font-size:.76rem;font-weight:800}.board-shell{margin-top:.45rem;border:1px solid rgba(171,210,248,.48);border-radius:18px;padding:.7rem;background:linear-gradient(170deg,#1f4e84b3,#173e6abf);position:relative;min-height:0;height:100%;overflow:hidden}.board-players-strip{display:contents}.board-player-card{position:absolute;top:.8rem;width:clamp(130px,12vw,200px);border-radius:12px;overflow:hidden;background:#fff;border:1px solid rgba(159,195,233,.8);box-shadow:0 12px 24px #09224459}.board-player-you{left:1.1rem}.board-player-partner{right:1.1rem}.board-player-card p{margin:0;padding:.5rem;text-align:center;font-size:1.48rem;font-weight:800;color:#e8f2ff;background:linear-gradient(170deg,#1f4f87,#2d629e)}.board-player-video{width:100%;aspect-ratio:4 / 3;border-radius:0}.word-header{position:absolute;top:1.1rem;left:50%;transform:translate(-50%);text-align:center;min-width:280px}.word-header .turn-label{color:#dfefff;margin-bottom:.34rem}.word-header .word-mask{color:#1d3552;background:#f5fbffe0;border-radius:999px;border:1px solid rgba(159,195,233,.9);display:inline-block;padding:.2rem 1.1rem;font-size:clamp(.9rem,1.45vw,1.2rem)}.word-mask-text{display:inline-block;transition:color .18s ease,background-color .18s ease,box-shadow .18s ease;border-radius:999px;padding:0 .45rem}.mini-fireworks{position:absolute;left:50%;top:calc(100% + 6px);transform:translate(-50%);width:130px;height:48px;pointer-events:none}.mini-fireworks.in-guess-panel{left:auto;right:8px;top:4px;transform:none}.mini-fireworks .spark{position:absolute;width:7px;height:7px;border-radius:999px;opacity:0;animation:firework-burst .7s ease-out forwards}.mini-fireworks .s1{left:16px;top:26px;background:#22c55e;animation-delay:0ms}.mini-fireworks .s2{left:34px;top:16px;background:#f97316;animation-delay:70ms}.mini-fireworks .s3{left:56px;top:30px;background:#3b82f6;animation-delay:30ms}.mini-fireworks .s4{left:76px;top:14px;background:#eab308;animation-delay:90ms}.mini-fireworks .s5{left:96px;top:26px;background:#d946ef;animation-delay:40ms}.mini-fireworks .s6{left:112px;top:18px;background:#ef4444;animation-delay:.12s}@keyframes firework-burst{0%{transform:scale(.5) translateY(6px);opacity:0}35%{opacity:1}to{transform:scale(1.3) translateY(-10px);opacity:0}}.board-canvas-wrap{background:#f7f8fb;border:2px solid #d3d9e6;border-radius:16px;padding:.75rem;margin-top:clamp(4.2rem,9vh,5.1rem);height:calc(100% - clamp(12.2rem,29vh,15.4rem));min-height:0;overflow:hidden}.board-canvas{min-height:0;height:100%;background:#fff;border:none;box-shadow:inset 0 0 0 1px #edf1f6}.guess-widget{position:absolute;right:1.15rem;bottom:.8rem;width:min(300px,30vw);border-radius:12px;border:1px solid #5f81ad;background:#f3f7fd;box-shadow:0 12px 22px #0c1e3f73;overflow:hidden}.guess-widget h4{margin:0;padding:.65rem .8rem;font-size:1.3rem;color:#f5fbff;background:linear-gradient(170deg,#2d629e,#245288)}.guess-log{padding:.65rem .7rem;height:clamp(92px,11vh,140px);overflow-y:auto;display:grid;align-content:start;gap:.4rem}.guess-success-banner{position:relative;margin:.55rem .55rem 0;border-radius:10px;border:1px solid #53c577;background:linear-gradient(180deg,#c8f9d3,#8fecaa);color:#0f5132;padding:.45rem .55rem;display:flex;align-items:center;gap:.4rem;min-height:36px}.guess-success-word{font-weight:900;background:#ffffff8c;border-radius:999px;padding:.12rem .44rem}.guess-success-text{font-weight:800}.guess-compose{display:grid;grid-template-columns:1fr auto;gap:.45rem;padding:.55rem .65rem .65rem;border-top:1px solid #d1ddec}.board-toolbar{position:absolute;left:1.1rem;bottom:.8rem;width:min(620px,calc(100% - min(320px,32vw) - 1.9rem));border-radius:12px;border:1px solid #c7d6e8;background:linear-gradient(180deg,#f7f8fc,#edf2f9);box-shadow:0 12px 20px #0e224138;padding:.45rem;display:grid;gap:.55rem}.toolbar-colors{display:flex;flex-wrap:wrap;gap:.45rem}.color-dot{width:27px;height:27px;border-radius:999px;border:2px solid rgba(255,255,255,.96);box-shadow:0 0 0 1px #1f3f6852;padding:0}.color-dot.is-active{box-shadow:0 0 0 3px #1d4ed84d}.toolbar-actions{display:grid;grid-template-columns:110px repeat(3,minmax(0,1fr));gap:.45rem;align-items:end}.finish-game-button{white-space:nowrap}.toolbar-slider{margin:0}.toolbar-slider span{font-size:.68rem}.room-entry-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:#0714276b;display:grid;place-items:center;border-radius:18px;z-index:6;padding:1rem}.room-entry-modal{width:min(560px,100%);max-height:calc(100dvh - 2rem);padding:1rem;display:grid;gap:.75rem;overflow:auto}.room-entry-modal h3{margin:0;font-size:1.3rem}.settings-modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background:#08112085;display:grid;place-items:center;z-index:50;padding:1rem}.settings-modal{width:min(560px,100%);max-height:calc(100dvh - 2rem);padding:1rem;display:grid;gap:.8rem;overflow:auto}.settings-modal-header{display:flex;justify-content:space-between;align-items:center;gap:.7rem}.settings-modal-header h3{margin:0;font-size:1.1rem}.settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:.65rem}.settings-actions{display:grid;grid-template-columns:1fr 1fr;gap:.55rem}.round-label{margin:0;color:var(--ink-soft);font-weight:800;letter-spacing:.08em;text-transform:uppercase;font-size:.7rem}.turn-label{margin:0;font-size:.92rem;font-weight:800}.word-mask{margin:0;font-size:clamp(1rem,1.8vw,1.45rem);letter-spacing:.12em;color:var(--primary-strong);font-weight:800}.hint-line{margin:0;color:var(--ink-soft);font-size:.8rem}.canvas-wrap{border:1px solid var(--line);border-radius:16px;background:#f5f8ff;padding:.7rem}.drawing-canvas{display:block;width:100%;min-height:380px;aspect-ratio:16 / 10;background:#fff;border-radius:12px;border:1px dashed #a9bad8;touch-action:none;cursor:not-allowed}.drawing-canvas.is-drawer{cursor:crosshair}.draw-controls{display:grid;gap:.5rem;grid-template-columns:repeat(4,minmax(0,1fr));align-items:end}.draw-controls.minimal{grid-template-columns:1fr 1fr auto}.compact-field input[type=range]{padding:0;border:none;box-shadow:none;min-height:0;accent-color:var(--primary)}.compact-field input[type=color]{min-height:42px;padding:.22rem}.turn-controls{display:grid;gap:.5rem;grid-template-columns:repeat(2,minmax(0,1fr))}.turn-controls.three-turn-controls{grid-template-columns:repeat(3,minmax(0,1fr))}.gallery-page{display:grid;gap:.8rem;padding:.75rem;border-radius:16px;border:1px solid rgba(170,208,247,.42);background:radial-gradient(circle at 18% 16%,rgba(120,177,245,.2),transparent 32%),radial-gradient(circle at 83% 72%,rgba(32,92,165,.18),transparent 38%),linear-gradient(160deg,#214f84,#2f679f 48%,#2a5d91)}.gallery-page .round-header{border-color:#add6fb73;background:linear-gradient(170deg,#fafdfff5,#ecf5fff0)}.drawing-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(148px,1fr));gap:.6rem}.drawing-thumb{display:grid;gap:.45rem;padding:.45rem;border-radius:12px;border:1px solid rgba(173,214,251,.6);background:linear-gradient(180deg,#fdfffffa,#eff6fff5);text-align:left}.drawing-thumb.is-selected{border-color:var(--primary);box-shadow:0 0 0 2px #1d4ed829}.drawing-thumb img{width:100%;aspect-ratio:16 / 10;border-radius:10px;border:1px solid var(--line);object-fit:contain;background:#fff}.drawing-thumb span{font-size:.78rem;color:#2d527f;font-weight:700}.merch-builder{border:1px solid rgba(169,210,247,.55);border-radius:14px;background:linear-gradient(165deg,#f5fafff7,#e7f2fff2);padding:.7rem;display:grid;gap:.65rem;grid-template-columns:minmax(240px,1fr) minmax(220px,290px)}.merch-controls{display:grid;gap:.45rem;align-content:start}.merch-options{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.45rem}.merch-actions{display:grid;gap:.45rem;grid-template-columns:repeat(2,minmax(0,1fr))}.merch-preview{border-radius:12px;border:1px solid var(--line);background:linear-gradient(165deg,#ecf1ff,#f7faff);min-height:280px;position:relative;display:grid;place-items:center;overflow:hidden}.merch-base{width:min(96%,270px);max-height:92%;object-fit:contain;filter:drop-shadow(0 10px 16px rgba(39,75,122,.2))}.merch-artwork{width:min(42%,126px);max-height:132px;object-fit:contain;border-radius:8px;border:1px solid rgba(27,71,170,.24);background:#fff;position:absolute;top:42%;left:50%;transform:translate(-50%,-50%);z-index:1}.game-event{margin:0;color:var(--ink-soft);font-size:.9rem}.chat-panel{padding:.75rem;display:grid;grid-template-rows:auto minmax(0,1fr) auto;gap:.55rem;min-height:0;max-height:40vh;overflow:hidden}.chat-panel h3{margin:0;font-size:.95rem;color:var(--ink);text-transform:uppercase;letter-spacing:.08em}.chat-log{border-radius:12px;border:1px solid var(--line);background:linear-gradient(180deg,#fbfdff,#f3f7ff);padding:.56rem;display:grid;align-content:start;gap:.4rem;min-height:0;height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;touch-action:pan-y;overscroll-behavior:contain;scrollbar-width:thin}.chat-empty{margin:0;color:#6b7e9f;font-size:.86rem}.chat-line{margin:0;color:var(--ink-soft);font-size:.86rem;line-height:1.35}.chat-compose{display:grid;gap:.45rem;grid-template-columns:1fr auto}.chat-compose button{white-space:nowrap}.same-device-card{border-radius:16px;border:1px solid var(--line);background:#fff;padding:1.1rem}.same-device-card h2{margin:0 0 .5rem}.same-device-card p{margin:.35rem 0 0;color:var(--ink-soft)}.stage{padding:.8rem;display:grid;gap:.8rem;align-content:start}.videos{display:grid;gap:.7rem;grid-template-columns:1fr}.video-card{background:linear-gradient(165deg,#0f172a,#1e293b);border-radius:15px;border:1px solid rgba(191,209,235,.36);padding:.65rem;color:#fff;display:grid;gap:.4rem}.video-card h3{margin:0;font-size:.94rem;letter-spacing:.02em}video{width:100%;aspect-ratio:16 / 10;background:#101827;border-radius:12px;object-fit:cover;border:1px solid rgba(219,231,253,.46)}.local-video{transform:scaleX(-1)}.video-note{margin:0;color:#dbe5fb;font-size:.82rem}.volume-control{display:grid;gap:.3rem}.volume-control span{font-size:.76rem;color:#f4f7ff;font-weight:700}.volume-control input[type=range]{padding:0;border:none;box-shadow:none;accent-color:#f59e0b}.preview-audio-controls{display:grid;gap:.4rem}@media (max-width: 1100px){.layout,.layout-focus-play,.mode-options,.actions.three-actions,.field-row{grid-template-columns:1fr}.draw-controls{grid-template-columns:repeat(2,minmax(0,1fr))}.turn-controls.three-turn-controls{grid-template-columns:1fr}.game-hud{grid-template-columns:1fr;text-align:center}.hud-left{justify-items:center}.hud-right,.hud-center{font-size:1.2rem}.hud-right{justify-content:center}.board-shell{min-height:0;height:100%;overflow:hidden;display:grid;grid-template-rows:auto auto minmax(0,1fr) auto auto;gap:.6rem;align-content:stretch}.board-players-strip{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.45rem}.board-player-card{position:static;width:100%;max-width:none;display:grid;margin:0;min-width:0}.board-player-card p{font-size:1.02rem;padding:.35rem .45rem}.board-player-video{aspect-ratio:16 / 10}.word-header{position:static;transform:none;margin-bottom:0;min-width:0}.board-canvas-wrap{margin-top:0;height:auto;min-height:clamp(230px,38dvh,360px);display:grid}.board-canvas{min-height:0;height:100%}.guess-widget,.board-toolbar{position:static;width:100%;margin-top:0}.toolbar-actions{grid-template-columns:90px repeat(2,minmax(0,1fr))}.finish-game-button{grid-column:1 / -1;white-space:normal}.settings-grid,.settings-actions,.merch-builder{grid-template-columns:1fr}.chat-panel{max-height:46vh}.drawing-canvas{min-height:0}}@media (max-width: 760px){#app{place-items:start center;padding:.7rem}.layout{width:min(100%,100vw - 1rem);gap:.75rem}.controls,.game-panel,.chat-panel,.stage{padding:.8rem}.game-hud{gap:.45rem;padding:.5rem .6rem}.hud-timer{font-size:1.25rem}.hud-center{font-size:1rem}.hud-right{font-size:.84rem;gap:.35rem;flex-wrap:wrap}.hud-copy-button{min-height:32px;padding:.25rem .52rem;font-size:.69rem}.hud-settings-button{min-width:34px;min-height:34px;font-size:1.08rem}.draw-controls,.turn-controls,.chat-compose,.guess-compose{grid-template-columns:1fr}.board-shell{padding:.5rem;gap:.5rem}.board-players-strip{grid-template-columns:1fr 1fr;gap:.35rem}.board-player-card{border-radius:10px}.board-player-card p{font-size:.86rem;padding:.28rem .35rem}.word-header .turn-label{font-size:.82rem;margin-bottom:.25rem}.word-header .word-mask{padding:.16rem .7rem;font-size:.95rem}.board-canvas-wrap{min-height:clamp(190px,34dvh,290px);padding:.4rem;border-radius:12px}.guess-widget h4{font-size:.95rem;padding:.5rem .6rem}.guess-log{height:clamp(82px,13dvh,120px);padding:.5rem .55rem}.guess-compose{padding:.5rem .55rem .55rem}.board-toolbar{padding:.4rem;gap:.4rem}.toolbar-colors{gap:.28rem}.color-dot{width:24px;height:24px}.toolbar-actions{grid-template-columns:repeat(2,minmax(0,1fr));gap:.35rem}.toolbar-slider{grid-column:1 / -1}.toolbar-slider input[type=range]{min-height:30px}.finish-game-button{font-size:.8rem;padding:.52rem .55rem}.merch-actions{grid-template-columns:1fr}.chat-panel{min-height:250px;max-height:52vh}.drawing-canvas{min-height:0}.local-video-card{display:none}.partner-video-card{grid-template-columns:112px 1fr;grid-template-areas:"title title" "video note" "video volume";align-items:center;gap:.35rem .65rem}.partner-video-card h3{grid-area:title}.partner-video-card video{grid-area:video;width:112px;min-width:112px;max-width:112px;aspect-ratio:4 / 3}.partner-video-card .video-note{grid-area:note}.partner-video-card .volume-control{grid-area:volume}}
